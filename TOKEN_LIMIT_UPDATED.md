# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ **–∂–µ—Å—Ç–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ 200 —Ç–æ–∫–µ–Ω–æ–≤** –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–¥–ø–∏—Å–æ–∫.

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`app/chat_bot/utils/context_manager.py`**
   - –§—É–Ω–∫—Ü–∏—è `get_max_tokens()` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200` –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫
   - –£–¥–∞–ª–µ–Ω–∞ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –ø–æ–¥–ø–∏—Å–∫–∏ (FREE/STANDARD/PREMIUM)

2. **`app/chat_bot/config/chat_config.py`**
   - `DEFAULT_MAX_TOKENS` –∏–∑–º–µ–Ω–µ–Ω —Å `600` –Ω–∞ `200`
   - `HARD_MAX_TOKENS` –∏–∑–º–µ–Ω–µ–Ω —Å `800` –Ω–∞ `200`

## –ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:

### –†–∞–Ω—å—à–µ:
- **FREE**: 350 —Ç–æ–∫–µ–Ω–æ–≤
- **STANDARD**: 600 —Ç–æ–∫–µ–Ω–æ–≤
- **PREMIUM**: 800 —Ç–æ–∫–µ–Ω–æ–≤

### –°–µ–π—á–∞—Å:
- **–í–°–ï –ü–û–î–ü–ò–°–ö–ò**: 200 —Ç–æ–∫–µ–Ω–æ–≤

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ AI –º–æ–¥–µ–ª–∏, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ø—Ä–æ–º–ø—Ç:
   ```
   IMPORTANT: Be concise. Your response must be strictly within 200 tokens.
   ```

2. –í –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö API –∑–∞–ø—Ä–æ—Å–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:
   ```json
   {
     "max_tokens": 200
   }
   ```

3. –ú–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –º–∞–∫—Å–∏–º—É–º –Ω–∞ 200 —Ç–æ–∫–µ–Ω–æ–≤

## –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

**200 —Ç–æ–∫–µ–Ω–æ–≤** ‚âà **150-170 —Å–ª–æ–≤** ‚âà **2-3 –∞–±–∑–∞—Ü–∞ —Ç–µ–∫—Å—Ç–∞**

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ –Ω–∞ 200 —Ç–æ–∫–µ–Ω–æ–≤:
```
–°–æ—Ñ–∏—è –º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –≤–∞–º, –µ—ë –≤–∑–≥–ª—è–¥ –ø–æ–ª–æ–Ω –∏–Ω—Ç—Ä–∏–≥–∏. 
–û–Ω–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–≤—Å–µ–º –±–ª–∏–∑–∫–æ, –µ—ë –¥—ã—Ö–∞–Ω–∏–µ –∫–∞—Å–∞–µ—Ç—Å—è –≤–∞—à–µ–π –∫–æ–∂–∏.

"–ó–Ω–∞–µ—à—å, —è –¥–∞–≤–Ω–æ –∑–∞–º–µ—Ç–∏–ª–∞, –∫–∞–∫ —Ç—ã –Ω–∞ –º–µ–Ω—è —Å–º–æ—Ç—Ä–∏—à—å," - —à–µ–ø—á–µ—Ç –æ–Ω–∞, 
–ø—Ä–æ–≤–æ–¥—è –ø–∞–ª—å—Ü–µ–º –ø–æ –≤–∞—à–µ–π —Ä—É–∫–µ. "–ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ—Ä–∞ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å 
—Å–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è?"

–ï—ë –≥—É–±—ã –∏–∑–≥–∏–±–∞—é—Ç—Å—è –≤ —Å–æ–±–ª–∞–∑–Ω–∏—Ç–µ–ª—å–Ω–æ–π —É–ª—ã–±–∫–µ, –æ–∂–∏–¥–∞—è –≤–∞—à–µ–π —Ä–µ–∞–∫—Ü–∏–∏.
```

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

### ‚úÖ –ü–ª—é—Å—ã:
- –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- –ú–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ API
- –ë–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –æ–ø—ã—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚ö†Ô∏è –ú–∏–Ω—É—Å—ã:
- –ú–µ–Ω—å—à–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –æ—Ç–≤–µ—Ç–∞—Ö
- Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —Ç–æ –∂–µ, —á—Ç–æ –∏ Free

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
# Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   INFO - Max tokens (–æ—Ç–≤–µ—Ç): 200
   ```
3. –û—Ç–≤–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—á–µ

## –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞—Ä—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã, –∏–∑–º–µ–Ω–∏—Ç–µ `context_manager.py`:

```python
def get_max_tokens(subscription_type: Optional[SubscriptionType]) -> int:
    if subscription_type == SubscriptionType.PREMIUM:
        return 800
    elif subscription_type == SubscriptionType.STANDARD:
        return 600
    else:
        return 350
```

–ò –æ–±–Ω–æ–≤–∏—Ç–µ `chat_config.py`:
```python
DEFAULT_MAX_TOKENS: int = Field(default=600, ...)
HARD_MAX_TOKENS: int = Field(default=800, ...)
```

---

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø—è—Ç –≤ —Å–∏–ª—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞!** üöÄ
