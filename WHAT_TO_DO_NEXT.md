# –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï - Fish Audio TTS

## ‚úÖ –ß–¢–û –£–ñ–ï –°–î–ï–õ–ê–ù–û

1. **–£–¥–∞–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è fal.ai:**
   - –£–¥–∞–ª–µ–Ω `fal-client` –∏–∑ requirements.txt
   - –£–¥–∞–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `FAL_API_KEY`, `DIA_TTS_MODEL`, `PUBLIC_BASE_URL`
   - –í–µ—Å—å –∫–æ–¥ fal.ai –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ Fish Audio

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Fish Audio:**
   - –î–æ–±–∞–≤–ª–µ–Ω `fish-audio-sdk` –≤ requirements.txt
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `FISH_AUDIO_API_KEY`
   - –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `app/services/tts_service.py`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è instant voice cloning

3. **–°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - `FISH_AUDIO_QUICK_START.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - `FISH_AUDIO_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω `app/services/VOICE_PREVIEW_README.md`

## üîß –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ venv (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω)
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
pip install fish-audio-sdk
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á Fish Audio

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://fish.audio/
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Developer Settings** –∏–ª–∏ **API Keys**
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á

### –®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ .env

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:

```env
FISH_AUDIO_API_KEY=–≤–∞—à_–∫–ª—é—á_–∫–æ—Ç–æ—Ä—ã–π_–≤—ã_—Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≥–¥–µ –æ–Ω –∑–∞–ø—É—â–µ–Ω)

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
```

### –®–∞–≥ 5: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å —á–µ—Ä–µ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–ª–∏ API.

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ª–æ–≥–∞—Ö:**

```
INFO | app.services.tts_service:generate_tts_audio:XX - –ù–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ Fish Audio...
INFO | app.services.tts_service:_load_voice_audio:XX - –ó–∞–≥—Ä—É–∂–µ–Ω –∞—É–¥–∏–æ —Ñ–∞–π–ª –≥–æ–ª–æ—Å–∞ voice_preview_xxx.mp3, —Ä–∞–∑–º–µ—Ä: XXXXX –±–∞–π—Ç
INFO | app.services.tts_service:generate_tts_audio:XX - –ê—É–¥–∏–æ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ...
```

**–í–º–µ—Å—Ç–æ:**

```
WARNING | app.services.tts_service:generate_tts_audio:54 - Fish Audio API –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º None
ERROR | app.chat_bot.api.chat_endpoints - ERROR - –û—à–∏–±–∫–∞ –≤ generate_voice: 500: –ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ
```

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ü—Ä–æ–±–ª–µ–º–∞: "No module named 'fishaudio'"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip install fish-audio-sdk
```

### –ü—Ä–æ–±–ª–µ–º–∞: "FISH_AUDIO_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `.env`:
   ```bash
   cat .env | grep FISH_AUDIO_API_KEY
   ```
2. –ï—Å–ª–∏ –ø—É—Å—Ç–æ, –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –æ—Ç Fish Audio API

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á
- –ò—Å—á–µ—Ä–ø–∞–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ—Ä–º–∞—Ç–æ–º –æ–±—Ä–∞–∑—Ü–∞ –≥–æ–ª–æ—Å–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –Ω–∞ fish.audio
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—É –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π traceback –≤ –ª–æ–≥–∞—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ—Ç, –Ω–æ –∞—É–¥–∏–æ –±–∏—Ç–æ–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±—Ä–∞–∑—Ü—ã –≥–æ–ª–æ—Å–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP3
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã:
   ```bash
   ls -lh app/default_character_voices/
   ```
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –≥–æ–ª–æ—Å

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: Instant Voice Cloning

```
–ó–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≥–æ–ª–æ—Å–∞
    ‚Üì
–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑—Ü–∞ –≥–æ–ª–æ—Å–∞ –∏–∑ app/default_character_voices/
    ‚Üì
–ü–µ—Ä–µ–¥–∞—á–∞ –æ–±—Ä–∞–∑—Ü–∞ + —Ç–µ–∫—Å—Ç–∞ –≤ Fish Audio API
    ‚Üì
Fish Audio –∫–ª–æ–Ω–∏—Ä—É–µ—Ç –≥–æ–ª–æ—Å –Ω–∞ –ª–µ—Ç—É
    ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—á–∏
    ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ app/voices/
    ‚Üì
–í–æ–∑–≤—Ä–∞—Ç URL –∫ –∞—É–¥–∏–æ
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥–µ–ª–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É —Å –Ω–æ–≤—ã–º–∏ –≥–æ–ª–æ—Å–∞–º–∏
- ‚ö†Ô∏è –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–¥–∞–µ—Ç ~100-200 KB –∞—É–¥–∏–æ

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

### 1. –°–æ–∑–¥–∞–Ω–∏–µ persistent –º–æ–¥–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:

```python
# –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª–∏ –∏–∑ –≤—Å–µ—Ö –≥–æ–ª–æ—Å–æ–≤
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å reference_id –≤ Redis/–ë–î
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å reference_id –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ –∞—É–¥–∏–æ
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–µ–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ú–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ
- –ë–æ–ª—å—à–µ –∫–æ–¥–∞

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ TTS

–î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# app/config/settings.py
FISH_AUDIO_SPEED: float = 1.0  # –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏
FISH_AUDIO_VOLUME: float = 1.0  # –ì—Ä–æ–º–∫–æ—Å—Ç—å
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

```python
client.tts.convert(
    text=text,
    references=[...],
    prosody={"speed": settings.FISH_AUDIO_SPEED, "volume": settings.FISH_AUDIO_VOLUME}
)
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

–î–æ–±–∞–≤–∏—Ç—å —Å—á–µ—Ç—á–∏–∫–∏:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
- –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## üìù –†–µ–∑—é–º–µ

**–í—ã:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `pip install fish-audio-sdk`
2. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á –Ω–∞ fish.audio
3. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env`: `FISH_AUDIO_API_KEY=...`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≥–æ–ª–æ—Å–∞

**–Ø —Å–¥–µ–ª–∞–ª:**
- ‚úÖ –£–¥–∞–ª–∏–ª –≤—Å–µ —Å–ª–µ–¥—ã fal.ai
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–ª Fish Audio TTS —Å instant voice cloning
- ‚úÖ –î–æ–±–∞–≤–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°–æ–∑–¥–∞–ª –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —à–∞–≥–æ–≤ –≤—ã—à–µ, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ Fish Audio API! üéâ

---

**–í–æ–ø—Ä–æ—Å—ã? –ü—Ä–æ–±–ª–µ–º—ã?**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ñ–∞–π–ª—ã:
- `FISH_AUDIO_QUICK_START.md` - –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `FISH_AUDIO_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
