# –ò—Ç–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç—ã:

### test_redis_cache.py (13/13 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
- `test_get_redis_client_success` - —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
- `test_get_redis_client_failure` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `test_cache_set_get` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π
- `test_cache_get_none` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª—é—á–∞
- `test_cache_delete` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
- `test_cache_delete_pattern` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
- `test_cache_exists` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞
- `test_cache_exists_false` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª—é—á–∞
- `test_key_generators` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–ª—é—á–µ–π –∫—ç—à–∞
- `test_cache_set_without_ttl` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑ TTL
- `test_cache_get_json_decode_error` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JSON
- `test_cache_set_dict_serialization` - —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤–∞—Ä–µ–π
- `test_close_redis_client` - –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### test_coins_cache.py (4/4 —Ç–µ—Å—Ç–∞) ‚úÖ
- `test_get_user_coins_from_cache` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –∏–∑ –∫—ç—à–∞
- `test_get_user_coins_from_db` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–Ω–µ—Ç –∏–∑ –ë–î –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à
- `test_cache_invalidation_on_spend_coins` - –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Ç—Ä–∞—Ç–µ –º–æ–Ω–µ—Ç
- `test_cache_invalidation_on_add_coins` - –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –º–æ–Ω–µ—Ç

### test_subscription_cache.py (5/5 —Ç–µ—Å—Ç–æ–≤) ‚úÖ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫, –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ë–î, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–ø–∏—Å–∞–Ω–∏–∏ —Ñ–æ—Ç–æ –∏ –∫—Ä–µ–¥–∏—Ç–æ–≤.

### test_characters_cache.py (3/3 —Ç–µ—Å—Ç–∞) ‚úÖ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ë–î, –≤–æ–∑–≤—Ä–∞—Ç –∏–∑ –∫—ç—à–∞.

### test_chat_history_cache.py (3/3 —Ç–µ—Å—Ç–∞) ‚úÖ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.

### test_user_cache.py (2/2 —Ç–µ—Å—Ç–∞) ‚úÖ
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –∫—ç—à.

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 30
- **–í—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç** ‚úÖ

## üéØ –ü–æ–∫—Ä—ã—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

1. ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Redis (get/set/delete/TTL)
2. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–Ω–µ—Ç
3. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
4. ‚úÖ –ö—ç—à –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
5. ‚úÖ –ö—ç—à –ø–æ–¥–ø–∏—Å–æ–∫ (–∏–∑ –∫—ç—à–∞, –∏–∑ –ë–î, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è)
6. ‚úÖ –ö—ç—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (get_current_user)

## üí° –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å:

```bash
python -m pytest tests/redis/ -v
```

–í—Å–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Ç—Ä–µ–±—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ Redis –∏–ª–∏ –ë–î.

